!function(e,t,n){"function"==typeof define&&define.amd?define(["jquery"],function(o){return n(o,e,t),o.mobile}):n(e.jQuery,e,t)}(this,document,function(e,t,n,o){!function(e){e.mobile={}}(e),function(e,t){var o={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,o),e.extend(e.mobile.support,o)}(e),function(e,t,n,o){function i(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function s(t,n){var s,r,a,c,u,l,p,h,d,v=t.type;if(t=e.Event(t),t.type=n,s=t.originalEvent,r=e.event.props,v.search(/^(mouse|click)/)>-1&&(r=S),s)for(p=r.length,c;p;)c=r[--p],t[c]=s[c];if(v.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),v.search(/^touch/)!==-1&&(a=i(s),v=a.touches,u=a.changedTouches,l=v&&v.length?v[0]:u&&u.length?u[0]:o))for(h=0,d=M.length;h<d;h++)c=M[h],t[c]=l[c];return t}function r(t){for(var n,o,i={};t;){n=e.data(t,k);for(o in n)n[o]&&(i[o]=i.hasVirtualBinding=!0);t=t.parentNode}return i}function a(t,n){for(var o;t;){if(o=e.data(t,k),o&&(!n||o[n]))return t;t=t.parentNode}return null}function c(){H=!1}function u(){H=!0}function l(){Q=0,j.length=0,F=!1,u()}function p(){c()}function h(){d(),x=setTimeout(function(){x=0,l()},e.vmouse.resetTimerDuration)}function d(){x&&(clearTimeout(x),x=0)}function v(t,n,o){var i;return(o&&o[t]||!o&&a(n.target,t))&&(i=s(n,t),e(n.target).trigger(i)),i}function f(t){var n=e.data(t.target,X);if(!(F||Q&&Q===n)){var o=v("v"+t.type,t);o&&(o.isDefaultPrevented()&&t.preventDefault(),o.isPropagationStopped()&&t.stopPropagation(),o.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function m(t){var n,o,s=i(t).touches;if(s&&1===s.length&&(n=t.target,o=r(n),o.hasVirtualBinding)){Q=q++,e.data(n,X,Q),d(),p(),N=!1;var a=i(t).touches[0];z=a.pageX,B=a.pageY,v("vmouseover",t,o),v("vmousedown",t,o)}}function g(e){H||(N||v("vmousecancel",e,r(e.target)),N=!0,h())}function w(t){if(!H){var n=i(t).touches[0],o=N,s=e.vmouse.moveDistanceThreshold,a=r(t.target);N=N||Math.abs(n.pageX-z)>s||Math.abs(n.pageY-B)>s,N&&!o&&v("vmousecancel",t,a),v("vmousemove",t,a),h()}}function b(e){if(!H){u();var t,n=r(e.target);if(v("vmouseup",e,n),!N){var o=v("vclick",e,n);o&&o.isDefaultPrevented()&&(t=i(e).changedTouches[0],j.push({touchID:Q,x:t.clientX,y:t.clientY}),F=!0)}v("vmouseout",e,n),N=!1,h()}}function T(t){var n,o=e.data(t,k);if(o)for(n in o)if(o[n])return!0;return!1}function D(){}function y(t){var n=t.substr(1);return{setup:function(o,i){T(this)||e.data(this,k,{});var s=e.data(this,k);s[t]=!0,I[t]=(I[t]||0)+1,1===I[t]&&V.bind(n,f),e(this).bind(n,D),L&&(I.touchstart=(I.touchstart||0)+1,1===I.touchstart&&V.bind("touchstart",m).bind("touchend",b).bind("touchmove",w).bind("scroll",g))},teardown:function(o,i){--I[t],I[t]||V.unbind(n,f),L&&(--I.touchstart,I.touchstart||V.unbind("touchstart",m).unbind("touchmove",w).unbind("touchend",b).unbind("scroll",g));var s=e(this),r=e.data(this,k);r&&(r[t]=!1),s.unbind(n,D),T(this)||s.removeData(k)}}}var E,k="virtualMouseBindings",X="virtualTouchID",Y="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),M="clientX clientY pageX pageY screenX screenY".split(" "),P=e.event.mouseHooks?e.event.mouseHooks.props:[],S=e.event.props.concat(P),I={},x=0,z=0,B=0,N=!1,j=[],F=!1,H=!1,L="addEventListener"in n,V=e(n),q=1,Q=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var A=0;A<Y.length;A++)e.event.special[Y[A]]=y(Y[A]);L&&n.addEventListener("click",function(t){var n,o,i,s,r,a,c=j.length,u=t.target;if(c)for(n=t.clientX,o=t.clientY,E=e.vmouse.clickDistanceThreshold,i=u;i;){for(s=0;s<c;s++)if(r=j[s],a=0,i===u&&Math.abs(r.x-n)<E&&Math.abs(r.y-o)<E||e.data(i,X)===r.touchID)return t.preventDefault(),void t.stopPropagation();i=i.parentNode}},!0)}(e,t,n),function(e,t,o){function i(t,n,o){var i=o.type;o.type=n,e.event.dispatch.call(t,o),o.type=i}var s=e(n);e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight swipeup swipedownscrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)});var r=e.mobile.support.touch,a="touchmove scroll",c=r?"touchstart":"mousedown",u=r?"touchend":"mouseup",l=r?"touchmove":"mousemove";e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){n=t,i(s,n?"scrollstart":"scrollstop",e)}var n,o,s=this,r=e(s);r.bind(a,function(i){e.event.special.scrollstart.enabled&&(n||t(i,!0),clearTimeout(o),o=setTimeout(function(){t(i,!1)},50))})}},e.event.special.tap={tapholdThreshold:750,setup:function(){var t=this,n=e(t);n.bind("vmousedown",function(o){function r(){clearTimeout(u)}function a(){r(),n.unbind("vclick",c).unbind("vmouseup",r),s.unbind("vmousecancel",a)}function c(e){a(),l===e.target&&i(t,"tap",e)}if(o.which&&1!==o.which)return!1;var u,l=o.target;o.originalEvent;n.bind("vmouseup",r).bind("vclick",c),s.bind("vmousecancel",a),u=setTimeout(function(){i(t,"taphold",e.Event("taphold",{target:l}))},e.event.special.tap.tapholdThreshold)})}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t;return{time:(new Date).getTime(),coords:[n.pageX,n.pageY],origin:e(t.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[t.pageX,t.pageY]}},handleSwipe:function(t,n){var o=Math.abs(t.coords[0]-n.coords[0]),i=Math.abs(t.coords[1]-n.coords[1]),s="";n.time-t.time<e.event.special.swipe.durationThreshold&&(o>e.event.special.swipe.horizontalDistanceThreshold&&i<e.event.special.swipe.verticalDistanceThreshold?s=t.coords[0]>n.coords[0]?"swipeleft":"swiperight":o<e.event.special.swipe.horizontalDistanceThreshold&&i>e.event.special.swipe.verticalDistanceThreshold&&(s=t.coords[1]>n.coords[1]?"swipeup":"swipedown")),s&&t.origin.trigger("swipe").trigger(s)},setup:function(){var t=this,n=e(t);n.bind(c,function(t){function i(t){r&&(s=e.event.special.swipe.stop(t),Math.abs(r.coords[0]-s.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault())}var s,r=e.event.special.swipe.start(t);n.bind(l,i).one(u,function(){n.unbind(l,i),r&&s&&e.event.special.swipe.handleSwipe(r,s),r=s=o})})}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)}}})}(e,this)});
//# sourceMappingURL=jquery.mobile.touch.js.map
