{"version":3,"sources":["assets/lib/PAWA/PAWALoggerAdapter.js"],"names":["define","PAWA","recordLog","methods","this","constructor","prototype","forbids","__recorded__","initialize","model","name","hasOwnProperty","charAt","method","__logCnf__","console","log","moduleName","className","result","apply","arguments","PAWAController","PAWACollection","PAWAModel","PAWAView","__recordLog__"],"mappings":"AAGAA,QAAQ,WAAY,SAASC,GAI5B,QAASC,KACL,GAAIC,GAAUC,KAAKC,YAAYC,UAC9BC,GADoDH,KAAKC,YAAYG,cAC1DC,WAAc,EAAGC,MAAQ,EAAGL,YAAe,GAEvD,KAAGD,KAAKC,YAAYG,aAApB,CAEAJ,KAAKC,YAAYG,cAAe,CAChC,KAAI,GAAIG,KAAQR,GACf,GAAGA,EAAQS,eAAeD,IAAkC,kBAAlBR,GAAQQ,MAA2BA,IAAQJ,KAA+B,MAAnBI,EAAKE,OAAO,GAAY,CACxH,GAAIC,GAASX,EAAQQ,EACrBR,GAAQQ,GAAQ,SAAUA,EAAMG,GAC/B,MAAO,YACHV,KAAKW,YAEVC,QAAQC,IAAIb,KAAKW,WAAWG,WAAa,MAAQd,KAAKW,WAAWI,UAAY,OAASR,EAAO,OAE3F,IAAIS,GAASN,EAAOO,MAAMjB,KAAMkB,UAIhC,OAHGlB,MAAKW,WAGDK,IAENT,EAAMG,KAOfb,EAAKsB,eAAejB,UAAUS,YAAcG,WAAY,OAAQC,UAAW,kBAC3ElB,EAAKuB,eAAelB,UAAUS,YAAcG,WAAY,OAAQC,UAAW,kBAC3ElB,EAAKwB,UAAUnB,UAAUS,YAAcG,WAAY,OAAQC,UAAW,aACtElB,EAAKyB,SAASpB,UAAUS,YAAcG,WAAY,OAAQC,UAAW,YAIrElB,EAAKsB,eAAejB,UAAUqB,cAC3B1B,EAAKuB,eAAelB,UAAUqB,cAC9B1B,EAAKwB,UAAUnB,UAAUqB,cACzB1B,EAAKyB,SAASpB,UAAUqB,cACxBzB","file":"PAWALoggerAdapter.js","sourcesContent":["/**\r\n *PAWA切面日志适配器 \r\n */\r\ndefine(['PAWAAll'], function(PAWA) {\r\n\t/**\r\n\t *切面日志记录器 \r\n\t */\r\n\tfunction recordLog (){\r\n    \tvar methods = this.constructor.prototype, recorded = this.constructor.__recorded__,\r\n    \t\tforbids = {'initialize': 0, 'model':0, 'constructor': 0};\r\n    \t//因为是在类实例化的时候去做切面日志，因此如果已经实例化过一次的类，就不再做切面日志了\r\n    \tif(this.constructor.__recorded__) return ;\r\n    \t//标识为日志已做\r\n    \tthis.constructor.__recorded__ = true;\r\n    \tfor(var name in methods) {\r\n    \t\tif(methods.hasOwnProperty(name) && typeof methods[name] === 'function'  && !(name in forbids) && name.charAt(0) !== '_') {\r\n    \t\t\tvar method = methods[name];\r\n    \t\t\tmethods[name] = (function(name, method) {\r\n    \t\t\t\treturn function(){\r\n    \t\t\t\t\tif(this.__logCnf__) {\r\n    \t\t\t\t\t\t//logger.i(this.__logCnf__.moduleName, \"类：\", this.__logCnf__.className, \"的方法:\",name,\"被调用！\");\r\n\t\t\t\t\t\t\tconsole.log(this.__logCnf__.moduleName + \" 类：\" + this.__logCnf__.className + \"的方法：\" + name + \"被调用！\");\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tvar result = method.apply(this, arguments);\r\n    \t\t\t\t\tif(this.__logCnf__) {\r\n    \t\t\t\t\t\t//logger.i(this.__logCnf__.moduleName, \"类：\",this.__logCnf__.className, \"的方法:\",name,\"调用结束！\");\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\treturn result;\r\n    \t\t\t\t}\r\n    \t\t\t})(name, method);\r\n    \t\t}\r\n    \t}\r\n    }\r\n    /**\r\n     *配置各个类的切面日志 模块及类名\r\n     */\r\n\tPAWA.PAWAController.prototype.__logCnf__ = {moduleName: \"PAWA\", className: \"PAWAController\"};\r\n\tPAWA.PAWACollection.prototype.__logCnf__ = {moduleName: \"PAWA\", className: \"PAWACollection\"};\r\n\tPAWA.PAWAModel.prototype.__logCnf__ = {moduleName: \"PAWA\", className: \"PAWAModel\"};\r\n\tPAWA.PAWAView.prototype.__logCnf__ = {moduleName: \"PAWA\", className: \"PAWAView\"};\r\n\t/**\r\n\t *包装切面日志 \r\n\t */\r\n\tPAWA.PAWAController.prototype.__recordLog__ \r\n\t\t= PAWA.PAWACollection.prototype.__recordLog__ \r\n\t\t= PAWA.PAWAModel.prototype.__recordLog__\r\n\t\t= PAWA.PAWAView.prototype.__recordLog__\r\n\t\t= recordLog;\r\n}); "]}