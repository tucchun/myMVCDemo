{"version":3,"sources":["assets/lib/PAWA/PAWARouter.js"],"names":["define","PAWA","Backbone","PAWARouter","Router","extend","initialize","options","this","init","apply","arguments","route","name","callback","_","isRegExp","_routeToRegExp","statusReg","RegExp","history","bind","fragment","args","_extractParameters","routeStatus","execFilter","compile","test","OK_STATUS","trigger","concat","request","clear","handleStatus"],"mappings":"AAGAA,QAAQ,OAAQ,YAAa,SAASC,EAAMC,GACxC,GAAIC,GAAaF,EAAKE,WAAaD,EAASE,OAAOC,QAC/CC,WAAa,SAASC,GAClBC,KAAKC,KAAKC,MAAMF,KAAMG,YAE1BF,KAAO,SAASF,KAEhBK,MAAO,SAASA,EAAOC,EAAMC,GACxBC,EAAEC,SAASJ,KAAQA,EAAQJ,KAAKS,eAAeL,IACpDE,IAAUA,EAAWN,KAAKK,GAC/B,IAAIK,GAAY,GAAIC,OAkBjB,OAjBHjB,GAASkB,QAAQR,MAAMA,EAAOG,EAAEM,KAAK,SAASC,GACvC,GAAIC,GAAOf,KAAKgB,mBAAmBZ,EAAOU,EAK1C,OAJArB,GAAKwB,YAAc,IACnBxB,EAAKyB,WAAWd,EAAOU,EAAUC,GACjCL,EAAUS,QAAQ1B,EAAKwB,YAAa,MAEhCP,EAAUU,KAAK3B,EAAK4B,YAKxBf,GAAYA,EAASJ,MAAMF,KAAMe,GACjCf,KAAKsB,QAAQpB,MAAMF,MAAO,SAAWK,GAAMkB,OAAOR,IAClDf,KAAKsB,QAAQ,QAASjB,EAAMU,GAC5BrB,EAASkB,QAAQU,QAAQ,QAAStB,KAAMK,EAAMU,OAC9CtB,GAAK+B,QAAQC,aARZhC,GAAKiC,aAAajC,EAAKwB,YAAab,EAAOU,EAAUC,IAS1Df,OACOA,OAIT,OADAL,GAAWsB,YAAc,IAClBtB","file":"PAWARouter.js","sourcesContent":["/**\r\n * 重载Backbone.Router, 将规则解析到PAWAController中的方法\r\n */\r\ndefine(['PAWA', 'backbone'], function(PAWA, Backbone) {\r\n    var PAWARouter = PAWA.PAWARouter = Backbone.Router.extend({\r\n        initialize : function(options) {\r\n            this.init.apply(this, arguments);\r\n        },\r\n        init : function(options) {\r\n        },\r\n        route: function(route, name, callback) {\r\n      \t\tif (!_.isRegExp(route)) route = this._routeToRegExp(route);\r\n\t\t\tif (!callback) callback = this[name];\r\n\t\t\tvar statusReg = new RegExp();\r\n\t\t\tBackbone.history.route(route, _.bind(function(fragment) {\r\n\t\t        var args = this._extractParameters(route, fragment);\r\n\t\t        PAWA.routeStatus = 200;\r\n\t\t        PAWA.execFilter(route, fragment, args);\r\n\t\t        statusReg.compile(PAWA.routeStatus, 'ig');\r\n\t\t        //判断经过过滤器之后状态码是否依旧OK，如果不OK的话，执行配置中的状态码处理\r\n\t\t        if(!statusReg.test(PAWA.OK_STATUS)) {\r\n\t\t        \tPAWA.handleStatus(PAWA.routeStatus, route, fragment, args);\r\n\t\t        \treturn ;\r\n\t\t        }\r\n\t\t        //状态是OK的，继续其它处理\r\n\t\t        callback && callback.apply(this, args);\r\n\t\t        this.trigger.apply(this, ['route:' + name].concat(args));\r\n\t\t        this.trigger('route', name, args);\r\n\t\t        Backbone.history.trigger('route', this, name, args);\r\n\t\t        PAWA.request.clear();\r\n\t\t\t}, this));\r\n\t\t    return this;\r\n      }\r\n    });\r\n    PAWARouter.routeStatus = 200;\r\n    return PAWARouter;\r\n});\r\n"]}